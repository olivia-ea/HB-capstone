{% extends 'base.html' %}
{% block content %}

<div>Input an activity to generate a playlist!</div>

<br>
 
<form id="activity-form">
    Activity name: <input type="text" id="activity_query">
    <br>
    Playlist name: <input type="text" id="playlist_name">
    <input type="submit" value="Submit" id='search-button'>
</form>

<br>
<br>

<div id="div-playlist">
    <iframe id="view-playlist"  data src="" width="500" height="580" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
</div>

<div style="height:200px; width:200px;overflow-y:auto;">
  <table>
    <tr>
        <th>PREVIOUS PLAYLISTS</th>
    </tr>
    {% for playlist in user_playlists: %}
    <tr>
        <td> {{ playlist }}</td>
    </tr> 
    {% endfor %}
  </table>
</div>


<script>

  $('#activity-form').submit(function( event ) {
    event.preventDefault();
 
  const formData = {
    activity_query: $('#activity_query').val(),
    playlist_name: $('#playlist_name').val()
    };

  $.post('/activity-page-cont', formData, (results) => {
    $('#view-playlist').attr('src', results.playlist);
    });

  });

</script>

<br>
<br>
<br>
<div>  
    <button id='logout-user' onclick="location.href = '/logout'">logout</button>
</div>

{% endblock %}
